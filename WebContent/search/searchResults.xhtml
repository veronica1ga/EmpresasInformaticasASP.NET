<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">
<head>
<title>Vacaciones en Canarias</title>
</head>
<h:body>

	<ui:composition template="../WEB-INF/templates/template.xhtml">
		<ui:define name="header">
			<h:graphicImage class="imagen" value="../resources/images/logo.png" />
			<br />
			<h:button outcome="/customer/newCustomer.xhtml" class="button"
				value="Regístrate" />
			<h:button outcome="/login.xhtml" class="button" value="Identíficate" />
			<br />
			<div style="float: left; width: 20%;">
				<h:graphicImage class="carro"
				value="../resources/images/empty-cart-dark_small.png" />
				<h:outputText id="lblTotal"
					value="#{shoppingCartBean.totalAsString}" />
			</div>
			<script type="text/javascript" src="../resources/javascript/prime.js"></script>
		</ui:define>
		<ui:define name="content">
	ffffff
	#{municipio.id_municipio}
<h:form id="form" >
				<p:repeat value="#{hotelResultsBean.offers}" var="offer" offset="0"
					size="5" step="1" varStatus="status">
					<h:panelGrid columns="2" style="width:100%"
						columnClasses="logo,detail">
						<p:commandLink update=":form:offerDetail"
							oncomplete="PF('offerDialog').show()">
							<f:setPropertyActionListener value="#{offer}"
								target="#{hotelResultsBean.selectedOffer}" />
							<p:graphicImage library="images"
								name="hotels/#{offer.hotelPicture}" />
						</p:commandLink>
						<p:outputPanel>
							<h:panelGrid columns="2" cellpadding="5">
								<h:outputText value="Hotel:" />
								<h:outputText value="#{offer.hotel}" style="font-weight: bold" />
								<h:outputText value="Precio:" />
								<h:outputText value="#{offer.price}" style="font-weight: bold" />
								<p:commandButton value="Añadir">
									<p:ajax listener="#{shoppingCartBean.addOffer(offer)}"
										update="lblTotal" />
								</p:commandButton>
							</h:panelGrid>
						</p:outputPanel>
					</h:panelGrid>
					<hr />
				</p:repeat>

				 <p:dialog header="Información de la oferta" widgetVar="offerDialog"
				modal="true" showEffect="blind" hideEffect="explode"
				resizable="false">
				<p:outputPanel id="offerDetail" style="text-align:center;">
					<p:panelGrid columns="2"
						rendered="#{not empty hotelResultsBean.selectedOffer}"
						columnClasses="label,value">
						<f:facet name="header">
							<p:graphicImage library="images"
								value="hotels/#{offer.hotelPicture}" />
						</f:facet>
						<h:outputText value="Hotel:" />
						<h:outputText value="#{offer.hotel}" style="font-weight: bold" />
						<h:outputText value="Precio:" />
						<h:outputText value="#{offer.price}" style="font-weight: bold" />
					</p:panelGrid>
				</p:outputPanel>
			</p:dialog>
			</h:form>
		</ui:define>
		<ui:define name="footer">
		by Verónica González Almeida
	</ui:define>
	</ui:composition>
</h:body>
</html>